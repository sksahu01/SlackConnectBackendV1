# üöÄ Slack Connect - Complete Deployment Guide

## üìç Your Deployment URLs
- **Frontend**: https://slackconnectfrontendv1.netlify.app
- **Backend**: https://slackconnectbackendv1.onrender.com

## ‚úÖ Environment Variables for Render

In your Render dashboard, set these environment variables:

```env
NODE_ENV=production
FRONTEND_URL=https://slackconnectfrontendv1.netlify.app
SLACK_REDIRECT_URI=https://slackconnectbackendv1.onrender.com/api/auth/callback
JWT_EXPIRES_IN=7d
DATABASE_PATH=/opt/render/project/src/data/slack_connect.db
LOG_LEVEL=info
```

**From your Slack App (api.slack.com/apps):**
```env
SLACK_CLIENT_ID=your_actual_client_id
SLACK_CLIENT_SECRET=your_actual_client_secret
```

**Auto-generated by Render:**
```env
JWT_SECRET=auto_generated_secure_key
PORT=auto_assigned_port
```

## üîß Slack App Configuration

1. Go to [Slack API Apps](https://api.slack.com/apps)
2. Select your app
3. **OAuth & Permissions** ‚Üí **Redirect URLs**:
   - Remove any localhost URLs
   - Add: `https://slackconnectbackendv1.onrender.com/api/auth/callback`
4. **Basic Information** ‚Üí **App Credentials**:
   - Copy Client ID ‚Üí Set in Render as `SLACK_CLIENT_ID`
   - Copy Client Secret ‚Üí Set in Render as `SLACK_CLIENT_SECRET`

## üåê CORS Configuration
Your backend is configured to allow requests from:
- `https://slackconnectfrontendv1.netlify.app` (production)
- `http://localhost:3000` (development)
- Any URL set in `FRONTEND_URL` environment variable

## üîÑ API Endpoints
- **Health Check**: https://slackconnectbackendv1.onrender.com/api/health
- **Auth Callback**: https://slackconnectbackendv1.onrender.com/api/auth/callback
- **API Base**: https://slackconnectbackendv1.onrender.com/api

## üß™ Testing Your Deployment

### 1. Backend Health Check
```bash
curl https://slackconnectbackendv1.onrender.com/api/health
```
Expected response:
```json
{
  "success": true,
  "message": "Server is running",
  "timestamp": "2025-08-07T...",
  "version": "1.0.0"
}
```

### 2. Frontend Access
Visit: https://slackconnectfrontendv1.netlify.app

### 3. OAuth Flow Test
1. Go to your frontend
2. Click "Connect to Slack" or similar button
3. Should redirect to Slack OAuth page
4. After authorization, should redirect back to your app

## üêõ Troubleshooting

### CORS Issues
- Check that `FRONTEND_URL` is set correctly in Render
- Verify Netlify URL is exactly: `https://slackconnectfrontendv1.netlify.app`

### OAuth Issues
- Verify redirect URL in Slack app matches: `https://slackconnectbackendv1.onrender.com/api/auth/callback`
- Check that `SLACK_CLIENT_ID` and `SLACK_CLIENT_SECRET` are set in Render

### Build Issues
- Check Render build logs
- Ensure all dependencies are in `dependencies` not `devDependencies`
- TypeScript should compile successfully

## üì± For Frontend Developers
Your frontend should make API calls to:
```javascript
const API_BASE_URL = 'https://slackconnectbackendv1.onrender.com/api';

// Example API call
fetch(`${API_BASE_URL}/auth/slack`, {
  method: 'GET',
  credentials: 'include',
  headers: {
    'Content-Type': 'application/json'
  }
});
```

## üîÑ Development vs Production

### Development (.env)
```env
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
SLACK_REDIRECT_URI=http://localhost:3001/api/auth/callback
```

### Production (Render Environment Variables)
```env
NODE_ENV=production
FRONTEND_URL=https://slackconnectfrontendv1.netlify.app
SLACK_REDIRECT_URI=https://slackconnectbackendv1.onrender.com/api/auth/callback
```

---

‚úÖ **Your app is now configured for production deployment!**
